{% extends 'valuation/base.html' %}

{% block content %}
<h2>æŸ»å®šçµæœ</h2>

{% if error %}
    <!-- ğŸš¨ ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="alert alert-warning" role="alert">
        <div class="d-flex align-items-center mb-3">
            {% if error_type == 'api_disabled' %}
                <i class="fas fa-tools me-2" style="font-size: 1.5rem;"></i>
                <h5 class="mb-0">ğŸ”§ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­</h5>
            {% elif error_type == 'connection_error' %}
                <i class="fas fa-wifi me-2" style="font-size: 1.5rem;"></i>
                <h5 class="mb-0">ğŸŒ æ¥ç¶šã‚¨ãƒ©ãƒ¼</h5>
            {% elif error_type == 'timeout' %}
                <i class="fas fa-clock me-2" style="font-size: 1.5rem;"></i>
                <h5 class="mb-0">â° ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ</h5>
            {% else %}
                <i class="fas fa-exclamation-triangle me-2" style="font-size: 1.5rem;"></i>
                <h5 class="mb-0">âš ï¸ ã‚¨ãƒ©ãƒ¼</h5>
            {% endif %}
        </div>
        <p class="mb-0">{{ error }}</p>
    </div>

    <!-- ğŸ“Š å…¥åŠ›æƒ…å ±è¡¨ç¤ºï¼ˆã‚¨ãƒ©ãƒ¼æ™‚ã‚‚è¡¨ç¤ºï¼‰ -->
    {% if input_data %}
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h5>ğŸ“Š å…¥åŠ›æƒ…å ±</h5>
                    </div>
                    <div class="card-body">
                        <div class="detail-item">
                            <strong>å»ºç‰©é¢ç©:</strong> {{ input_data.building_area }} ã¡
                        </div>
                        <div class="detail-item">
                            <strong>åœŸåœ°é¢ç©:</strong> {{ input_data.land_area }} ã¡
                        </div>
                        <div class="detail-item">
                            <strong>ç¯‰å¹´æ•°:</strong> {{ input_data.building_age }} å¹´
                        </div>
                        <div class="detail-item">
                            <strong>æ‰€åœ¨åŒº:</strong> {{ input_data.ward_name }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}

{% elif result %}
    <div class="result-card card mb-4">
        <div class="card-body text-center">
            <h3 class="mb-3">ğŸ  æ¨å®šä¾¡æ ¼</h3>
            <div class="price-display">{{ result.predicted_price|floatformat:0 }} ä¸‡å††</div>
            <p class="text-muted mt-2">ä¿¡é ¼åº¦: {{ result.confidence|floatformat:1 }}%</p>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h5>ğŸ“Š å…¥åŠ›æƒ…å ±</h5>
                </div>
                <div class="card-body">
                    <div class="detail-item">
                        <strong>å»ºç‰©é¢ç©:</strong> {{ input_data.building_area }} ã¡
                    </div>
                    <div class="detail-item">
                        <strong>åœŸåœ°é¢ç©:</strong> {{ input_data.land_area }} ã¡
                    </div>
                    <div class="detail-item">
                        <strong>ç¯‰å¹´æ•°:</strong> {{ input_data.building_age }} å¹´
                    </div>
                    <div class="detail-item">
                        <strong>æ‰€åœ¨åŒº:</strong> {{ input_data.ward_name }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="mt-4">
        <div class="card">
            <div class="card-header">
                <h5>ğŸ“ æŸ»å®šè©³ç´°</h5>
            </div>
            <div class="card-body">
                <p><strong>ä¾¡æ ¼ç®—å‡ºè¦ç´ :</strong></p>
                <ul>
                    <li>å»ºç‰©é¢ç©ãƒ»åœŸåœ°é¢ç©ã«ã‚ˆã‚‹åŸºæœ¬ä¾¡å€¤</li>
                    <li>ç¯‰å¹´æ•°ã«ã‚ˆã‚‹æ¸›ä¾¡è¦ç´ </li>
                    <li>æ‰€åœ¨åŒºã«ã‚ˆã‚‹åœ°åŸŸä¾¡å€¤</li>
                    <li>æŸ»å®šæ™‚æœŸã«ã‚ˆã‚‹å¸‚å ´å‹•å‘</li>
                </ul>
            </div>
        </div>
    </div>

{% else %}
    <div class="alert alert-warning" role="alert">
        <h5>æŸ»å®šçµæœã‚’è¡¨ç¤ºã§ãã¾ã›ã‚“ã§ã—ãŸ</h5>
        <p>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã‹ã€ä¸æ­£ãªã‚¢ã‚¯ã‚»ã‚¹ã§ã™ã€‚</p>
    </div>
{% endif %}

<div class="text-center mt-4">
    <a href="{% url 'index' %}" class="btn btn-secondary btn-lg">ğŸ”„ æ–°ã—ã„æŸ»å®šã‚’é–‹å§‹</a>
</div>

<div class="mt-4 text-muted">
    <h6>âš ï¸ é‡è¦äº‹é …</h6>
    <ul class="small">
        <li>æœ¬æŸ»å®šçµæœã¯æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹æ¨å®šå€¤ã§ã™</li>
        <li>å®Ÿéš›ã®å¸‚å ´ä¾¡æ ¼ã‚„å–å¼•ä¾¡æ ¼ã¨ã¯ç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™</li>
        <li>æ­£ç¢ºãªæŸ»å®šã«ã¯ä¸å‹•ç”£ä¼šç¤¾ã«ã‚ˆã‚‹ç¾åœ°èª¿æŸ»ãŒå¿…è¦ã§ã™</li>
        <li>æŠ•è³‡ã‚„å–å¼•ã®åˆ¤æ–­ææ–™ã¨ã—ã¦ã”åˆ©ç”¨ã®éš›ã¯ååˆ†ã”æ³¨æ„ãã ã•ã„</li>
    </ul>
</div>
{% endblock %}